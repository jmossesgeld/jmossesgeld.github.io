(this["webpackJsonpph-payroll-manager"]=this["webpackJsonpph-payroll-manager"]||[]).push([[3],{313:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return O}));var i=n(295),a=n(135),l=n(296),d=n(116),o=n(97),r=n(234),s=n(176),c=n(304),u=n(282),b=n(0),m=n(20),j=n(102),v=n(33);var h=n(1),x={dateLabel:{display:"flex","& div":{ml:2},overflow:"auto"},timeInput:{display:"flex","& .MuiFormControl-root":{mb:1}}};function O(e){var t,n,O,p,g=function(e,t){var n=Object(m.c)(),i=Object(m.d)((function(n){return n.timeKeeping.find((function(n){return n.date===e&&n.employeeId===t.id}))}),m.b),a=Object(m.d)((function(t){return t.holidays.filter((function(t){return new Date(t.date).getTime()===e}))}),m.b),l=Boolean(t.restDays.filter((function(t){return t===new Date(e).getDay()})).length);return Object(b.useEffect)((function(){i?(n(Object(j.c)({index:i.id,key:"holidays",newValue:a})),n(Object(j.c)({index:i.id,key:"isRestDay",newValue:l}))):n(Object(j.a)({employeeId:t.id,date:e,timeIn:l||a.length?"":t.workingHours.from,timeOut:l||a.length?"":t.workingHours.to,overtime:0,late:0,isRestDay:l,holidays:a}))})),{record:i,onChangeHandler:function e(d,o){"isAbsent"===d?(n(Object(j.c)({index:i.id,key:d,newValue:o.target.checked})),e("timeIn",{target:{value:o.target.checked||l||a.length?"":String(t.workingHours.from)}}),e("timeOut",{target:{value:o.target.checked||l||a.length?"":String(t.workingHours.to)}})):n(Object(j.c)({index:i.id,key:d,newValue:o.target.value})),"timeOut"===d&&n(Object(j.c)({index:i.id,key:"overtime",newValue:Object(v.c)(o.target.value,t.workingHours.to)})),"timeIn"===d&&n(Object(j.c)({index:i.id,key:"late",newValue:Math.max(Object(v.c)(o.target.value,t.workingHours.from),0)}))},holidays:a,isRestDay:l}}(e.date,e.employee),y=g.record,f=g.onChangeHandler,w=Object(h.jsxs)(i.a,{container:!0,children:[null===y||void 0===y?void 0:y.holidays.map((function(e,t){return Object(h.jsx)(i.a,{item:!0,xs:6,sm:6,md:12,children:Object(h.jsx)(a.a,{title:e.description,placement:"top",arrow:!0,children:Object(h.jsx)(l.a,{label:"regular"===e.type?"Regular Holiday":"Special Day",variant:"outlined",color:"warning",sx:{width:"100%"}},t)})},t)})),(null===y||void 0===y?void 0:y.isRestDay)&&Object(h.jsx)(i.a,{item:!0,xs:6,sm:6,md:12,children:Object(h.jsx)(l.a,{label:"Rest Day",variant:"outlined",sx:{width:"100%"},color:"primary"})})]});return Object(h.jsxs)(i.a,{container:!0,rowSpacing:2,children:[Object(h.jsx)(i.a,{item:!0,xs:12,mb:1,children:Object(h.jsx)(u.a,{sx:x.dateLabel,children:Object(h.jsx)(d.a,{variant:"overline",fontWeight:"bold",children:new Date(e.date).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})})}),Object(h.jsxs)(i.a,{item:!0,xs:12,sm:8,md:5,sx:x.timeInput,children:[Object(h.jsx)(o.a,{type:"time",label:"Time In",disabled:(null===y||void 0===y?void 0:y.isAbsent)||!1,value:null!==(t=null===y||void 0===y?void 0:y.timeIn)&&void 0!==t?t:"",onChange:f.bind(null,"timeIn"),InputLabelProps:{shrink:!0}}),Object(h.jsx)(o.a,{type:"time",label:"Time Out",disabled:(null===y||void 0===y?void 0:y.isAbsent)||!1,value:null!==(n=null===y||void 0===y?void 0:y.timeOut)&&void 0!==n?n:"",onChange:f.bind(null,"timeOut"),InputLabelProps:{shrink:!0}})]}),Object(h.jsx)(i.a,{item:!0,xs:12,sm:8,md:7,children:Object(h.jsxs)(i.a,{container:!0,spacing:2,children:[Object(h.jsx)(i.a,{item:!0,xs:4,sm:4,md:3,children:Object(h.jsx)(r.a,{label:"Absent",control:Object(h.jsx)(s.a,{checked:null!==(O=null===y||void 0===y?void 0:y.isAbsent)&&void 0!==O&&O,disabled:(null===y||void 0===y?void 0:y.isRestDay)||(null===y||void 0===y?void 0:y.holidays.length)>0||!1,onChange:f.bind(null,"isAbsent")})})}),Object(h.jsx)(i.a,{item:!0,xs:4,sm:4,md:2.75,children:Object(h.jsx)(o.a,{type:"number",variant:"standard",label:"Late",size:"small",disabled:(null===y||void 0===y?void 0:y.isAbsent)||!1,value:null!==(p=null===y||void 0===y?void 0:y.late)&&void 0!==p?p:0,onChange:f.bind(null,"late"),InputProps:{endAdornment:Object(h.jsx)(c.a,{position:"start",children:"hr(s)"})},InputLabelProps:{shrink:!0}})}),Object(h.jsx)(i.a,{item:!0,xs:4,sm:4,md:2.75,children:Object(h.jsx)(o.a,{type:"number",variant:"standard",label:(null===y||void 0===y?void 0:y.overtime)>0?"Overtime":"Undertime",size:"small",disabled:(null===y||void 0===y?void 0:y.isAbsent)||!1,value:(null===y||void 0===y?void 0:y.overtime)||(null===y||void 0===y?void 0:y.undertime)||0,onChange:f.bind(null,"overtime"),InputProps:{endAdornment:Object(h.jsx)(c.a,{position:"start",children:"hr(s)"})},InputLabelProps:{shrink:!0}})}),Object(h.jsx)(i.a,{item:!0,xs:12,sm:4,md:3.5,children:w})]})})]})}}}]);